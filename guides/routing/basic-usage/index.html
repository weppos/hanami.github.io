<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Hanami - The web, with simplicity" />
    <meta name="keywords" content="hanami,hanamirb,lotus,lotusrb,web,framework,ruby,open source,oss,os,software,free,free software,architecture,fast,lightweight,testing,tdd,bdd,test driven development,behaviour driven development,full stack,mvc,model view object,pattern,patterns,design patterns,oop,object oriented programming,testability,http,https,routing,router,http router,restful,resource,resources,convention,controller,models,repository,query,sql,interactors,two-step view,view,template,presenters,render,rendering,helpers,erb,haml,tilt,json,xml,yaml,yml,framwork,framewrok,riby,free sowftare"/>
    <meta name="author" content="Luca Guidi">
    <link href="http://feeds.feedburner.com/hanamirb" rel="alternate" title="Hanami" type="application/atom+xml" />

    <title>Hanami | Guides - Basic Usage</title>

    <link href="http://fonts.googleapis.com/css?family=Roboto:100,300,400,700" rel="stylesheet">
    <link href="/stylesheets/toolkit-minimal.css" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/application-minimal.css" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/guides.css" rel="stylesheet" type="text/css" />
  </head>

  <body>
    <nav class="navbar navbar-default navbar-static-top navbar-padded text-uppercase app-navbar">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed p-x-0" data-toggle="collapse" data-target="#navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">
            <span>Hanami</span>
          </a>
        </div>
        <div class="navbar-collapse collapse" id="navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            <li class="active">
              <a href="/guides">Guides</a>
            </li>
            <li>
              <a href="/community">Community</a>
            </li>
            <li>
              <a href="https://github.com/hanami" target="_blank">Source Code</a>
            </li>
            <li>
              <a href="/blog">Blog</a>
            </li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container docs-content">
      <ul id="markdown-toc">
        <li></li>
        <li><span class="icon icon-pencil" id="edit-guides-article" title="Edit this article"><a href="https://github.com/hanami/hanami.github.io/edit/build/source/guides/routing/basic-usage.md" target="_blank"></a></span></li>

        <li class="toc-group">
          <span>Introduction</span>
          <ul>
            <li><a href="/guides/getting-started">Getting Started</a></li>
          </ul>
        </li>

        <li class="toc-group">
          <span>Architectures</span>
          <ul>
            <li><a href="/guides/architectures/overview">Overview</a></li>
            <li><a href="/guides/architectures/container">Container</a></li>
            <li><a href="/guides/architectures/application">Application</a></li>
          </ul>
        </li>

        <li class="toc-group">
          <span>Applications</span>
          <ul>
            <li><a href="/guides/applications/initializers">Initializers</a></li>
            <li><a href="/guides/applications/rake">Rake</a></li>
          </ul>
        </li>

        <li class="toc-group">
          <span>Routing</span>
          <ul>
            <li><a href="/guides/routing/overview">Overview</a></li>
            <li><a href="/guides/routing/basic-usage">Basic Usage</a></li>
            <li><a href="/guides/routing/restful-resources">RESTful Resource(s)</a></li>
          </ul>
        </li>

        <li class="toc-group">
          <span>Actions</span>
          <ul>
            <li><a href="/guides/actions/overview">Overview</a></li>
            <li><a href="/guides/actions/basic-usage">Basic Usage</a></li>
            <li><a href="/guides/actions/parameters">Parameters</a></li>
            <li><a href="/guides/actions/request-and-response">Request & Response</a></li>
            <li><a href="/guides/actions/exposures">Exposures</a></li>
            <li><a href="/guides/actions/rack-integration">Rack Integration</a></li>
            <li><a href="/guides/actions/mime-types">MIME Types</a></li>
            <li><a href="/guides/actions/cookies">Cookies</a></li>
            <li><a href="/guides/actions/sessions">Sessions</a></li>
            <li><a href="/guides/actions/exception-handling">Exception Handling</a></li>
            <li><a href="/guides/actions/control-flow">Control Flow</a></li>
            <li><a href="/guides/actions/http-caching">HTTP Caching</a></li>
            <li><a href="/guides/actions/share-code">Share Code</a></li>
            <li><a href="/guides/actions/testing">Testing</a></li>
          </ul>
        </li>

        <li class="toc-group">
          <span>Views</span>
          <ul>
            <li><a href="/guides/views/overview">Overview</a></li>
            <li><a href="/guides/views/basic-usage">Basic Usage</a></li>
            <li><a href="/guides/views/templates">Templates</a></li>
            <li><a href="/guides/views/mime-types">MIME Types</a></li>
            <li><a href="/guides/views/layouts">Layouts</a></li>
            <li><a href="/guides/views/custom-error-pages">Custom Error Pages</a></li>
            <li><a href="/guides/views/share-code">Share Code</a></li>
            <li><a href="/guides/views/testing">Testing</a></li>
          </ul>
        </li>

        <li class="toc-group">
          <span>Models</span>
          <ul>
            <li><a href="/guides/models/overview">Overview</a></li>
            <li><a href="/guides/models/entities">Entities</a></li>
            <li><a href="/guides/models/repositories">Repositories</a></li>
          </ul>
        </li>

        <li class="toc-group">
          <span>Migrations</span>
          <ul>
            <li><a href="/guides/migrations/overview">Overview</a></li>
            <li><a href="/guides/migrations/create-table">Create Table</a></li>
            <li><a href="/guides/migrations/alter-table">Alter Table</a></li>
          </ul>
        </li>

        <li class="toc-group">
          <span>Helpers</span>
          <ul>
            <li><a href="/guides/helpers/overview">Overview</a></li>
            <li><a href="/guides/helpers/html5">HTML5</a></li>
            <li><a href="/guides/helpers/forms">Forms</a></li>
            <li><a href="/guides/helpers/routing">Routing</a></li>
            <li><a href="/guides/helpers/assets">Assets</a></li>
            <li><a href="/guides/helpers/links">Links</a></li>
            <li><a href="/guides/helpers/escape">Markup Escape</a></li>
            <li><a href="/guides/helpers/numbers">Numbers</a></li>
            <li><a href="/guides/helpers/custom-helpers">Custom Helpers</a></li>
          </ul>
        </li>

        <li class="toc-group">
          <span>Mailers</span>
          <ul>
            <li><a href="/guides/mailers/overview">Overview</a></li>
            <li><a href="/guides/mailers/basic-usage">Basic Usage</a></li>
            <li><a href="/guides/mailers/templates">Templates</a></li>
            <li><a href="/guides/mailers/delivery">Delivery</a></li>
            <li><a href="/guides/mailers/share-code">Share Code</a></li>
            <li><a href="/guides/mailers/testing">Testing</a></li>
          </ul>
        </li>

        <li class="toc-group">
          <span>Assets</span>
          <ul>
            <li><a href="/guides/assets/overview">Overview</a></li>
            <li><a href="/guides/assets/preprocessors">Preprocessors</a></li>
            <li><a href="/guides/assets/compressors">Compressors</a></li>
            <li><a href="/guides/assets/content-delivery-network">Content Delivery Network (CDN)</a></li>
          </ul>
        </li>

        <li class="toc-group">
          <span>Command Line</span>
          <ul>
            <li><a href="/guides/command-line/applications">Applications</a></li>
            <li><a href="/guides/command-line/generators">Generators</a></li>
            <li><a href="/guides/command-line/destroy">Destroy</a></li>
            <li><a href="/guides/command-line/database">Database</a></li>
            <li><a href="/guides/command-line/assets">Assets</a></li>
            <li><a href="/guides/command-line/routes">Routes</a></li>
            <li><a href="/guides/command-line/version">Version</a></li>
          </ul>
        </li>

        <li class="toc-group">
          <span>Upgrade Notes</span>
          <ul>
            <li><a href="/guides/upgrade-notes/v060">v0.6.0</a></li>
            <li><a href="/guides/upgrade-notes/v070">v0.7.0</a></li>
          </ul>
        </li>
      </ul>

      <h1>Basic Usage</h1>

<h2>Path matching</h2>

<p>In <a href="/guides/routing/overview">our initial example</a> we have introduced a really basic relative URI: <code>/hello</code>.
This is what we call <em>fixed path matching</em>.
It is called this because the segment is responsible for responding only to an <strong>exact match</strong>.
If we visit <code>/hello</code>, we get a response.
If we hit <code>/foo</code>, a <code>404</code> (Not Found) is returned.</p>

<h3>Fixed Matching</h3>
<pre class="language-ruby ruby"><code><span class="c1"># apps/web/config/routes.rb</span>
<span class="n">get</span> <span class="s1">'/dashboard'</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"dashboard#index"</span>
</code></pre>

<h3>Variables</h3>

<p>When we have dynamic content to serve, we want our URI to be dynamic as well.
This can be easily achieved via path variables.
They are defined with a colon, followed by a name (eg. <code>:id</code>).</p>

<p>Once an incoming request is forwarded to our endpoint, we can access the current value in our param&rsquo;s action (<code>params[:id]</code>).</p>
<pre class="language-ruby ruby"><code><span class="n">get</span> <span class="s1">'/books/:id'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'books#show'</span>
</code></pre>

<p>Multiple variables can be used in a path.</p>
<pre class="language-ruby ruby"><code><span class="n">get</span> <span class="s1">'/books/:book_id/reviews/:id'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'reviews#show'</span>
</code></pre>

<h3>Variables Constraints</h3>

<p>It&rsquo;s possible to specify constraints for each variable.
The rule MUST be expressed as a regular expression.
If a request can satisfy all of them, we&rsquo;re good, otherwise a <code>404</code> is returned.</p>
<pre class="language-ruby ruby"><code><span class="n">get</span> <span class="s1">'/authors/:id'</span><span class="p">,</span> <span class="ss">id: </span><span class="sr">/\d+/</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'authors#show'</span>
</code></pre>

<h3>Optional Tokens</h3>

<p>Sometimes we want to specify an optional token as part of our URI.
It should be expressed between round parentheses.
If present, it will be available as param in the Rack env, otherwise it will be missing, but the endpoint will be still hit.</p>
<pre class="language-ruby ruby"><code><span class="n">get</span> <span class="s1">'/books(.:format)'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'books#show'</span>
</code></pre>

<h3>Wildcard Matching</h3>

<p>Imagine we want to to serve static files from a user repository.
It would be impossible to know in advance which files are stored and to prepare routes accordingly.</p>

<p>To solve this problem, Hanami supports <em>wildcard matching</em>.</p>
<pre class="language-ruby ruby"><code><span class="n">get</span> <span class="s1">'/files/*'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'files#show'</span>
</code></pre>

<h2>Named Routes</h2>

<p>We can specify a unique name for each route, in order to generate paths from the router or to test them.</p>
<pre class="language-ruby ruby"><code><span class="n">get</span> <span class="s1">'/hello'</span><span class="p">,</span>     <span class="ss">to: </span><span class="s1">'greet#index'</span><span class="p">,</span> <span class="ss">as: :greeting</span>
<span class="n">get</span> <span class="s1">'/books/:id'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'books#show'</span><span class="p">,</span>  <span class="ss">as: :book</span>
</code></pre>

<p>When a Hanami application starts, it generates a Ruby module at the runtime under our application namespace: eg. <code>Web::Routes</code>.
We can use it to generate a relative or absolute URI for our route.</p>
<pre class="language-ruby ruby"><code><span class="no">Web</span><span class="o">::</span><span class="no">Routes</span><span class="p">.</span><span class="nf">path</span><span class="p">(</span><span class="ss">:greeting</span><span class="p">)</span> <span class="c1"># =&gt; "/hello"</span>
<span class="no">Web</span><span class="o">::</span><span class="no">Routes</span><span class="p">.</span><span class="nf">url</span><span class="p">(</span><span class="ss">:greeting</span><span class="p">)</span>  <span class="c1"># =&gt; "http://localhost:2300/hello"</span>
</code></pre>

<p>When we have one or more variables, they can be specified as a Hash.</p>
<pre class="language-ruby ruby"><code><span class="no">Web</span><span class="o">::</span><span class="no">Routes</span><span class="p">.</span><span class="nf">path</span><span class="p">(</span><span class="ss">:book</span><span class="p">,</span> <span class="ss">id: </span><span class="mi">1</span><span class="p">)</span> <span class="c1"># =&gt; "/books/1"</span>
<span class="no">Web</span><span class="o">::</span><span class="no">Routes</span><span class="p">.</span><span class="nf">url</span><span class="p">(</span><span class="ss">:book</span><span class="p">,</span> <span class="ss">id: </span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># =&gt; "http://localhost:2300/books/1"</span>
</code></pre>

<p>Absolute URL generation is dependent on <code>scheme</code>, <code>host</code> and <code>port</code> settings in <code>apps/web/application.rb</code>.</p>

<h3>Routing Helpers</h3>

<p>Generating routes from <code>Web::Routes</code> is helpful, because that module can be accessed from anywhere.
However, this syntax is noisy.</p>

<p>Hanami has <em>routing helpers</em> available as <code>routes</code> in: <strong>actions</strong>, <strong>views</strong> and <strong>templates</strong>.</p>
<pre class="language-ruby ruby"><code><span class="o">&lt;</span><span class="sx">%= routes.path(:greeting) %&gt;
&lt;%=</span> <span class="n">routes</span><span class="p">.</span><span class="nf">url</span><span class="p">(</span><span class="ss">:greeting</span><span class="p">)</span> <span class="o">%&gt;</span>
</code></pre>

<p>Or</p>
<pre class="language-ruby ruby"><code><span class="o">&lt;</span><span class="sx">%= routes.greeting_path %&gt;
&lt;%=</span> <span class="n">routes</span><span class="p">.</span><span class="nf">greeting_url</span> <span class="sx">%&gt;
</span></code></pre>

<h2>Namespaces</h2>

<p>If we want to group a set of resources under a common prefix we can use <code>namespace</code>.</p>
<pre class="language-ruby ruby"><code><span class="n">namespace</span> <span class="s1">'docs'</span> <span class="k">do</span>
  <span class="n">get</span> <span class="s1">'/installation'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'docs#installation'</span>
  <span class="n">get</span> <span class="s1">'/usage'</span><span class="p">,</span>        <span class="ss">to: </span><span class="s1">'docs#usage'</span>
<span class="k">end</span>

<span class="c1"># This will generate:</span>
<span class="c1">#</span>
<span class="c1">#   /docs/installation</span>
<span class="c1">#   /docs/usage</span>
</code></pre>

<h2>Redirects</h2>

<p>In case of legacy routes, we can handle HTTP redirects at the routing level.</p>
<pre class="language-ruby ruby"><code><span class="n">redirect</span> <span class="s1">'/old'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'/new'</span>
</code></pre>

    </div>

    <div id="lotus" class="text-xs-center">
  <div class="row">
    Looking for <strong>Lotus</strong>? We renamed the project and it's now called <strong>Hanami</strong>. Read the <a href="/blog/2016/01/22/lotus-is-now-hanami.html">announcement</a>.
  </div>
</div>


<div class="block app-block-footer">
  <div class="container">
    <div class="row">
      <div class="col-sm-2 m-b">
        <ul class="list-unstyled list-spaced">
          <li><h6 class="text-uppercase">Project</h6></li>
          <li><a href="https://github.com/hanami" target="_blank">GitHub</a></li>
          <li><a href="https://twitter.com/hanamirb" target="_blank">Twitter</a></li>
          <li><a href="https://rubygems.org/gems/hanami" target="_blank">Rubygems</a></li>
        </ul>
      </div>
      <div class="col-sm-2 m-b">
        <ul class="list-unstyled list-spaced">
          <li><h6 class="text-uppercase">Community</h6></li>
          <li><a href="/community#code-of-conduct">Code of Conduct</a></li>
          <li><a href="http://chat.hanamirb.org" target="_blank">Chat</a></li>
          <li><a href="https://discuss.hanamirb.org" target="_blank">Forum</a></li>
          <li><a href="http://stackoverflow.com/questions/tagged/hanami" target="_blank">StackOverflow</a></li>
          <li><a href="/mailing-list">Mailing List</a></li>
        </ul>
      </div>
      <div class="col-sm-2 m-b">
        <ul class="list-unstyled list-spaced">
          <a href="http://dnsimple.link/resolving-lotus" target="_blank">
            <span>Resolving with<br/></span>
            <img src="https://cdn.dnsimple.com/assets/resolving-with-us/logo-dark.png" alt="DNSimple" style="display:block;margin:0;padding:0;width:100px;"/>
          </a>
        </ul>
      </div>
      <div class="col-sm-6">
        <h6 class="text-uppercase">About</h6>
        <p>
          Hanami is a web framework for Ruby &mdash; &copy; 2014-2016 <a href="http://lucaguidi.com" target="_blank">Luca Guidi</a>.<br>
          Released under the <a href="https://opensource.org/licenses/MIT" target="_blank">MIT License</a>.
          <br><br>
          This project was formerly known as <strong>Lotus</strong>.
        </p>
      </div>
    </div>
  </div>
</div>
<script src="/javascripts/jquery.min.js" type="text/javascript"></script>
<script src="/javascripts/toolkit.js" type="text/javascript"></script>
<script src="/javascripts/application.js" type="text/javascript"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-47369640-1', 'hanamirb.org');
  ga('send', 'pageview');
</script>

  </body>
</html>
